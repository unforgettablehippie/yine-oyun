<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Sarƒ±l Bana! üê∏üçÉ</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&display=swap');

  body {
    margin: 0;
    height: 100vh;
    background: linear-gradient(to top, #a3d9a5, #e0f7e9);
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: 'Comic Neue', cursive, sans-serif;
    overflow: hidden;
    touch-action: manipulation;
  }

  #game {
    position: relative;
    width: 450px;
    height: 450px;
    background: #d9f4d9;
    border-radius: 30px;
    box-shadow: 0 0 40px #a3d9a5aa;
    border: 5px solid #7aba7a;
    overflow: hidden;
  }

  .grass {
    position: absolute;
    width: 20px;
    height: 20px;
    background: #4caf5077;
    border-radius: 50%;
    bottom: 0;
    animation: sway 3s ease-in-out infinite alternate;
  }
  .grass:nth-child(1) { left: 20px; animation-delay: 0s; }
  .grass:nth-child(2) { left: 60px; animation-delay: 1s; }
  .grass:nth-child(3) { left: 100px; animation-delay: 0.7s; }
  .grass:nth-child(4) { left: 140px; animation-delay: 1.5s; }
  .grass:nth-child(5) { left: 180px; animation-delay: 1.2s; }
  .grass:nth-child(6) { left: 220px; animation-delay: 0.4s; }
  .grass:nth-child(7) { left: 260px; animation-delay: 0.9s; }
  .grass:nth-child(8) { left: 300px; animation-delay: 0.3s; }
  .grass:nth-child(9) { left: 340px; animation-delay: 1.1s; }
  .grass:nth-child(10) { left: 380px; animation-delay: 1.8s; }

  @keyframes sway {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(8deg); }
  }

  .pond {
    position: absolute;
    width: 250px;
    height: 120px;
    background: #89c6e9aa;
    border-radius: 100px / 50px;
    bottom: 50px;
    left: 100px;
    box-shadow: inset 0 0 30px #72a7d3aa;
  }

  .character, .friend {
    position: absolute;
    width: 60px;
    height: 60px;
    font-size: 45px;
    user-select: none;
    cursor: default;
    transition: transform 0.2s;
  }

  .character {
    bottom: 70px;
    left: 40px;
  }

  .friend {
    bottom: 100px;
  }
  .friend.sad {
    filter: grayscale(60%);
    opacity: 0.7;
  }

  .heart {
    position: absolute;
    width: 24px;
    height: 24px;
    background: #ff9494;
    clip-path: polygon(50% 0%, 61% 12%, 75% 12%, 85% 23%, 85% 40%, 50% 80%, 15% 40%, 15% 23%, 25% 12%, 39% 12%);
    animation: flyUp 1s ease forwards;
    pointer-events: none;
  }

  @keyframes flyUp {
    0% {
      opacity: 1;
      transform: translateY(0);
    }
    100% {
      opacity: 0;
      transform: translateY(-50px);
    }
  }

  #startButton {
    position: absolute;
    padding: 10px 20px;
    background: #4CAF50;
    color: white;
    border: none;
    border-radius: 20px;
    font-family: 'Comic Neue', cursive;
    font-size: 18px;
    cursor: pointer;
    z-index: 100;
  }

</style>
</head>
<body>
  <button id="startButton">Oyunu Ba≈ülat</button>
  
  <div id="game" style="display:none;">
    <!-- √áimenler -->
    <div class="grass"></div><div class="grass"></div><div class="grass"></div><div class="grass"></div><div class="grass"></div>
    <div class="grass"></div><div class="grass"></div><div class="grass"></div><div class="grass"></div><div class="grass"></div>

    <!-- G√∂let -->
    <div class="pond"></div>

    <!-- Karakter: Kurbaƒüa -->
    <div id="player" class="character" style="left: 40px; bottom: 70px;">üê∏</div>

    <!-- √úzg√ºn arkada≈ü: Kedi -->
    <div id="friend1" class="friend sad" style="left: 320px; bottom: 110px;">üê±</div>
  </div>

  <!-- Fon m√ºziƒüi -->
  <audio id="bgMusic" src="https://cdn.pixabay.com/download/audio/2021/08/04/audio_4a6e847953.mp3?filename=relaxing-asleep-ambient-11941.mp3" loop></audio>

  <script>
    const player = document.getElementById('player');
    const friend1 = document.getElementById('friend1');
    const game = document.getElementById('game');
    const bgMusic = document.getElementById('bgMusic');
    const startButton = document.getElementById('startButton');

    let playerPos = { x: 40, y: 70 };
    const speed = 15;

    startButton.addEventListener('click', () => {
      startButton.style.display = 'none';
      game.style.display = 'block';
      bgMusic.volume = 0.3;
      bgMusic.play().catch(e => console.log("M√ºzik ba≈ülatƒ±lamadƒ±:", e));
    });

    function updatePlayerPosition() {
      player.style.left = playerPos.x + 'px';
      player.style.bottom = playerPos.y + 'px';
    }
    updatePlayerPosition();

    window.addEventListener('keydown', (e) => {
      switch(e.key) {
        case 'ArrowLeft':
          playerPos.x = Math.max(0, playerPos.x - speed);
          break;
        case 'ArrowRight':
          playerPos.x = Math.min(game.clientWidth - 60, playerPos.x + speed);
          break;
        case 'ArrowUp':
          playerPos.y = Math.min(game.clientHeight - 60, playerPos.y + speed);
          break;
        case 'ArrowDown':
          playerPos.y = Math.max(0, playerPos.y - speed);
          break;
        case ' ': // sarƒ±lma tu≈üu
          tryHug();
          break;
      }
      updatePlayerPosition();
    });

    function isNear(p1, p2, distance = 80) {
      const dx = p1.x - p2.x;
      const dy = p1.y - p2.y;
      return Math.sqrt(dx*dx + dy*dy) < distance;
    }

    function tryHug() {
      const friendPos = {
        x: parseInt(friend1.style.left),
        y: parseInt(friend1.style.bottom),
      };
      
      if(isNear(playerPos, friendPos)) {
        hugFriend(friend1);
      }
    }

    function hugFriend(friend) {
      if(friend.classList.contains('sad')) {
        friend.classList.remove('sad');
        spawnHeart(friend);
      }
    }

    function spawnHeart(friend) {
      const heart = document.createElement('div');
      heart.className = 'heart';
      heart.style.left = (parseInt(friend.style.left) + 18) + 'px';
      heart.style.bottom = (parseInt(friend.style.bottom) + 40) + 'px';
      game.appendChild(heart);

      setTimeout(() => {
        heart.remove();
      }, 1000);
    }
  </script>
</body>
</html>